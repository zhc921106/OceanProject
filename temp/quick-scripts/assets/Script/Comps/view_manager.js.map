{"version":3,"sources":["view_manager.js"],"names":["vm","_zorder","_cacheArr","_activeArr","_waitArr","init","openPrefab","assetUrl","params","parentReal","callback","scene","_checkScene","cc","error","parent","pos","v2","node","_checkCache","warn","_showPrefab","setPosition","prefab","loader","getRes","_addPrefab","loadRes","Prefab","completedCount","totalCount","GM","EventCenter","trigger","EventType","GM_UI_LOADING_START","progress","err","GM_UI_LOADING_END","isValid","_pushCache","k","log","name","_clearCache","zIndex","_getZorder","active","_actComp","instantiate","scripts","getComponents","Component","filter","component","__classname__","indexOf","i","length","script","_checkActivePop","openQueuePrefab","item","_pushWait","push","len","_quietLoadAsset","popWait","shift","checkActivePop","getComponent","popArr","children","child","sort","compa","compb","comp","resetOpacity","dialog","arr","na","nb","pop","_checkDeadPop","splice","director","getScene","module","exports"],"mappings":"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","file":"view_manager.js","sourceRoot":"../../../../../assets/Script/Comps","sourcesContent":["/*\n* 1. 网络连接菊花\n* 2. 预制体加载进入菊花\n* 3. 重要确定弹窗 \n*\t以上全部在最上层\n*/\nlet vm = {\n    _zorder:100,\n    _cacheArr:{},  // 已经缓存过的预制体  key(url)  value(当前节点)     ok\n    _activeArr:{}, // 当前父节点激活的 子节点 key(父节点) value([显示队列]) 需要在激活时，隐藏销毁时，检查下 ok\n    _waitArr:[],   // 当前在等待显示的队列。\n    \t\n\tinit(){\n\t}, \t\n\n    /*\n    *\tassetUrl: 预制体路径,\n    *\tparams: 所需参数,\n    *\tparent: 当前Node父节点\n    *   openPrefab(assetUrl,params,parentReal,callback) 打开预制体\n    *   openQueuePrefab(assetUrl,params,parentReal,callback) 内部带等待队列 弹窗叠加\n    */\n    openPrefab(assetUrl,params,parentReal,callback){\n    \tlet scene = this._checkScene();\n    \tif(!scene){ cc.error('VM not scene'); return;}\n    \tlet parent = parentReal || scene;\n        let pos = parentReal ? cc.v2(0,0) : cc.v2(568,320);\n    \tlet node = this._checkCache(assetUrl);\n    \tif(node){\n    \t\t// TODO 直接激活节点\n            cc.warn('VM getCache',assetUrl);\n    \t\tthis._showPrefab(node,params,parent,assetUrl);\n            node.setPosition(pos);\n            callback && callback();\n    \t\treturn;\n    \t}\n    \tlet prefab = cc.loader.getRes(assetUrl);\n    \tif(prefab){\n    \t\t// TODO \n            cc.warn('VM getRes',assetUrl);\n\t\t\tnode = this._addPrefab(prefab,params,parent,assetUrl);\n            node.setPosition(pos);\n            callback && callback();\n\t\t\treturn;\n    \t}\n        cc.warn('VM loadRes',assetUrl);\n    \tcc.loader.loadRes(assetUrl,cc.Prefab,(completedCount, totalCount)=>{\n    \t\t// TODO 加载进度更新\n            GM.EventCenter.trigger(GM.EventType.GM_UI_LOADING_START,{progress:(completedCount / totalCount)});\n    \t},(err,prefab)=>{\n    \t\t// TODO 加载更新完成\n            GM.EventCenter.trigger(GM.EventType.GM_UI_LOADING_END);\n    \t\tif(err){\n    \t\t\t// TODO 发生错误\n                cc.warn('VM loadRes err',err);\n    \t\t\treturn;\n    \t\t}\n    \t\tnode = this._addPrefab(prefab,params,parent,assetUrl);\n            node.setPosition(pos);\n            callback && callback();\n    \t});\n    },\n\n    /*\n    * vm_cache {url1:{name1:parent1,name2:parent2},url2:{name1:parent1}}\n    */\n    _checkCache(assetUrl){\n        let node = this._cacheArr[assetUrl];\n        if(node){\n            if(!cc.isValid(node)){\n                return null;\n            }\n            return node;\n        }\n        return null;\n    },\n    _pushCache(assetUrl,node){  \n        this._cacheArr[assetUrl] = node;\n\n        // 测试打印\n        for(let k in this._cacheArr){\n            cc.log('VM ','url:'+k,'name:'+this._cacheArr[k].name); // node name\n        }\n    },\n    _clearCache(assetUrl){\n        if(assetUrl){\n            delete this._cacheArr[assetUrl];\n            return;\n        }\n        this._cacheArr = {};\n    },\n\n    /*\n    *    激活显示当前预制体\n    */\n    _showPrefab(node,params,parent,assetUrl){\n        if(node.parent != parent){\n            node.parent = parent;\n        }\n\t\tnode.zIndex = this._getZorder();\n\t\tnode.active = true;\n        this._actComp(node,params,assetUrl);\n        return node;\n    },\n    _addPrefab(prefab,params,parent,assetUrl){\n    \tlet node = cc.instantiate(prefab);\n    \tnode.zIndex = this._getZorder();\n        node.parent = parent;\n        this._actComp(node,params,assetUrl);\n        return node;\n    },\n    _actComp(node,params,assetUrl){\n        let scripts = node.getComponents(cc.Component).filter(function (component) {\n            return component.__classname__.indexOf('cc.') !== 0;\n        });\n        for(let i = 0; i < scripts.length; i++){\n            let script = scripts[i];\n            script.init && script.init(params);\n        }\n        this._pushCache(assetUrl,node);\n\n        // 做一些check\n        this._checkActivePop(node);\n        \n\n        // 测试打印\n        // let scene = this._checkScene();\n        // for(let i = 0; i < scene.children.length; i++){\n        //     let child = scene.children[i];\n        //     cc.error('current scene child-',child.name,child.zIndex);\n        // }\n        \n    },\n\n    /*\n    *    等待预制队列\n    */\n    openQueuePrefab(assetUrl,params,parentReal,callback){\n        let item = {\n            assetUrl:assetUrl,\n            params:params,\n            parentReal:parentReal,\n            callback:callback,\n        };\n        this._pushWait(item);\n        if(this._waitArr.length == 1){\n            this.openPrefab(assetUrl,params,parentReal,callback);\n        }\n    },\n    _pushWait(item){\n        this._waitArr.push(item);\n        if(this._waitArr.length > 1){\n            let len = this._waitArr.length;\n            let item = this._waitArr[len-1];\n            this._quietLoadAsset(item.assetUrl);\n        }\n    },\n    popWait(){\n        this._waitArr.shift();\n        if(this._waitArr.length > 0){\n            let item = this._waitArr[0];\n            this.openPrefab(item.assetUrl,item.params,item.parentReal,item.callback);\n        }\n    },\n\n    /*\n    *    当前激活队列\n    */\n    checkActivePop(node){\n        if(!node.getComponent('dialog_comp')){return;}\n        let parent = node.parent;\n        let popArr = [];\n        for(let i = 0; i < parent.children.length; i++){\n            let child = parent.children[i];\n            if(child.active && child.getComponent('dialog_comp')){\n                popArr.push(child.getComponent('dialog_comp'));\n            }\n        }\n        let len = popArr.length;\n        if(len > 1){\n            popArr.sort((compa,compb)=>{\n                return compb.node.zIndex - compa.node.zIndex; //降序 105,104,103,102\n            });\n            for(let i = 1; i < popArr.length; i++){\n                let comp = popArr[i];\n                comp.resetOpacity(0);\n                cc.error(comp.name,comp.node.zIndex);\n            }\n        }\n        if(popArr[0]){popArr[0].resetOpacity();}\n    },\n    _checkActivePop(node){\n        if(!node.dialog){return;}\n        let parent = node.parent;\n        let arr = this._activeArr[parent.name] || [];\n        arr.push(node);\n        if(arr.length == 1){\n            arr[0].dialog.resetOpacity();\n            this._activeArr[parent.name] = arr;\n            return;\n        }\n        arr.sort((na,nb)=>{\n            return nb.zIndex - na.zIndex; //降序 105,104,103,102\n        });\n        for(let i = 1; i < arr.length; i++){\n            let pop = arr[i];\n            pop.dialog.resetOpacity(0);\n        }\n        arr[0].dialog.resetOpacity();\n    },\n    _checkDeadPop(node){\n        this.popWait();\n        if(!node.dialog){return;}\n        let parent = node.parent;\n        let arr = this._activeArr[parent.name] || [];\n        for(let i = 0; i < arr.length; i++){\n            if(arr[i] == node){\n                arr.splice(i,1);\n                break;\n            }\n        }\n        arr.sort((na,nb)=>{\n            return nb.zIndex - na.zIndex; //降序 105,104,103,102\n        });\n        if(arr[0]){arr[0].dialog.resetOpacity();}\n        this._activeArr[parent.name] = arr;\n    },\n\n    /*\n    *  辅助类\n    */\n    _checkScene(){\n        let scene = cc.director.getScene();\n        return scene;\n    },\n    _getZorder(){\n        return this._zorder++;\n    },\n\n    /*\n    * 静默加载预制体。\n    */\n    _quietLoadAsset(assetUrl){\n        if(cc.loader.getRes(assetUrl)){return;}\n    \tcc.loader.loadRes(assetUrl, (error,prefab)=>{});\n    },\n};\nGM.vm = module.exports = vm;"]}