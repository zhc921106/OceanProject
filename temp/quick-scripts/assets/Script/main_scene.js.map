{"version":3,"sources":["main_scene.js"],"names":["cfg","GM","util","vm","cc","Class","extends","require","properties","top_prefab","Prefab","onLoad","_initPersist","openQueuePrefab","onClickTest","event","custom","GM_DEBUG","log","openPrefab","pop_full_view","assetUrl","parent","node","getChildByName","instantiate","scene","getScene","zIndex","max_zindex"],"mappings":";;;;;;AAAA;;;;;;AAMA;;;;;AAKA;AACA,IAAMA,MAAMC,GAAGD,GAAf;AACA,IAAME,OAAOD,GAAGC,IAAhB;AACA,IAAMC,KAAKF,GAAGE,EAAd;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,iBAAR,CADJ;AAELC,gBAAY;AACRC,oBAAWL,GAAGM;;AADN,KAFP;AAMLC,UANK,oBAMK;AACN;AACA,aAAKC,YAAL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACAT,WAAGU,eAAH,CAAmB,0BAAnB,EAA8C,EAAC,MAAK,CAAN,EAA9C;AACA;AACA;AACH,KAnBI;AAqBLC,eArBK,uBAqBOC,KArBP,EAqBaC,MArBb,EAqBoB;AACrBhB,YAAIiB,QAAJ,IAAgB,KAAKC,GAAL,CAAS,aAAT,EAAuBF,MAAvB,CAAhB;AACA,YAAGA,UAAU,CAAb,EAAe;AACXb,eAAGgB,UAAH,CAAc,0BAAd,EAAyC,EAAC,MAAK,CAAN,EAAzC;AACH,SAFD,MAEM,IAAGH,UAAU,CAAb,EAAe;AACjBb,eAAGU,eAAH,CAAmB,uBAAnB,EAA2C,EAAC,MAAK,CAAN,EAA3C;AACAV,eAAGU,eAAH,CAAmB,0BAAnB,EAA8C,EAAC,MAAK,CAAN,EAA9C;AACAV,eAAGU,eAAH,CAAmB,uBAAnB,EAA2C,EAAC,MAAK,CAAN,EAA3C;AACAV,eAAGU,eAAH,CAAmB,2BAAnB,EAA+C,EAAC,MAAK,CAAN,EAA/C;AACA;AACH;AACJ,KAhCI;;AAiCL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGAO,iBA5CK,yBA4CSC,QA5CT,EA4CkB;AACnB,YAAIC,SAAS,KAAKC,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAb;AACArB,WAAGgB,UAAH,CAAc,mBAAd,EAAkC,EAAC,MAAK,CAAN,EAAlC,EAA2CG,MAA3C;AACH,KA/CI;;;AAiDL;;;AAGAV,gBApDK,0BAoDS;AACV,YAAIW,OAAOnB,GAAGqB,WAAH,CAAe,KAAKhB,UAApB,CAAX;AACA,YAAIiB,QAAQxB,KAAKyB,QAAL,EAAZ;AACAJ,aAAKK,MAAL,GAAc1B,KAAK2B,UAAnB;AACAN,aAAKD,MAAL,GAAcI,KAAd;AACH;AAzDI,CAAT","file":"main_scene.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*================================================================\n * FileName main_scene\n * Description 当前主场景\n * Created on 04/03/19 by ocean\n * Copyright (c) 2019 OCEAN\n================================================================*/\n/*\n*  GM: 全局\n*  GM.vm 视图管理\n*  GM.sm 声音管理\n*/\n// cfg.GM_DEBUG && cc.error(this.name);\nconst cfg = GM.cfg;\nconst util = GM.util;\nconst vm = GM.vm;\ncc.Class({\n    extends: require(\"CustomComponent\"),\n    properties: {\n        top_prefab:cc.Prefab,\n\n    },\n    onLoad () {\n        // cfg.GM_DEBUG && this.log('onLoad','woca');\n        this._initPersist();\n        \n        // this.schedule(()=>{\n        //     let scene = util.getScene();\n        //     for(let i = 0; i < scene.children.length; i++){\n        //         cfg.GM_DEBUG && cc.error(this.name,scene.children[i].name,scene.children[i].zIndex);\n        //     }\n        // },3);\n        vm.openQueuePrefab('Prefabs/Hall_Pop_Confirm',{'hi':1});\n        // vm.openQueuePrefab('Prefabs/Hall_Pop_Turn',{'hi':1});\n        // vm.openQueuePrefab('Prefabs/Hall_Pop_Activity',{'hi':1});\n    },\n\n    onClickTest(event,custom){\n        cfg.GM_DEBUG && this.log('onClickTest',custom);\n        if(custom == 2){\n            vm.openPrefab('Prefabs/Hall_Pop_Confirm',{'hi':1});\n        }else if(custom == 1){\n            vm.openQueuePrefab('Prefabs/Hall_Pop_Turn',{'hi':1});\n            vm.openQueuePrefab('Prefabs/Hall_Pop_Confirm',{'hi':1});\n            vm.openQueuePrefab('Prefabs/Hall_Pop_Turn',{'hi':1});\n            vm.openQueuePrefab('Prefabs/Hall_Pop_Activity',{'hi':1});\n            // vm.openPrefab('Prefabs/Hall_Pop_Confirm',{'hi':1},this.node.getChildByName('bg_sp'));\n        }\n    },\n    // _regEvts(){},\n    // start () {},\n    // onEnable (){},\n    // onDestroy (){},\n    // onDisable(){},\n    // update (dt) {},\n    // 一些全局的通知 公告 应该属于scene\n\n    /*\n    *    显示全屏view\n    */\n    pop_full_view(assetUrl){\n        let parent = this.node.getChildByName('pop_view');\n        vm.openPrefab('Prefabs/Hall_View',{'hi':1},parent);\n    },\n\n    /*\n    *    常驻点 层级最高    \n    */\n    _initPersist(){\n        let node = cc.instantiate(this.top_prefab);\n        let scene = util.getScene();\n        node.zIndex = util.max_zindex;\n        node.parent = scene;\n    },\n});"]}